var HelpSpace=HelpSpace||{};HelpSpace.populate_namespace=function(){"use strict";HelpSpace.tab_wikipedia=$("#tab_wikipedia"),HelpSpace.tab_factbites=$("#tab_factbites"),HelpSpace.tab_interview=$("#tab_interview"),HelpSpace.tab_pdf=$("#tab_pdf"),HelpSpace.tab_swf=$("#tab_swf"),HelpSpace.interview=$("#interview"),HelpSpace.factbites=$("#factbites"),HelpSpace.wikipedia=$("#wikipedia"),HelpSpace.swf=$("#swf"),HelpSpace.pdf=$("#pdf"),HelpSpace.wolfram=$("#wolfram"),HelpSpace.youtube=$("#youtube"),HelpSpace.fact_span=$("#fact_span"),HelpSpace.wiki_text=$("#wiki_text"),HelpSpace.fact_flow=$("#fact_flow"),HelpSpace.video_image_span=$("#video_image_span"),HelpSpace.video_flow=$("#video_flow"),HelpSpace.picture_flow=$("#picture_flow"),HelpSpace.api_docs=$("#api_docs"),HelpSpace.suggested_search=$("#suggested_search"),HelpSpace.related_search=$("#related_search"),HelpSpace.related_swf=$("#related_swf"),HelpSpace.related_pdf=$("#related_pdf"),HelpSpace.related_interview=$("#related_interview"),HelpSpace.in_field=$("#in-field"),HelpSpace.suggested_search_items=$("#suggested_search_items"),HelpSpace.related_search_items=$("#related_search_items"),HelpSpace.video_flow_items=$("#video_flow_items"),HelpSpace.picture_flow_items=$("#picture_flow_items"),HelpSpace.fact_flow_items=$("#fact_flow_items"),HelpSpace.sidebar_swf=$("#sidebar-swf"),HelpSpace.sidebar_pdf=$("#sidebar-pdf"),HelpSpace.sidebar_interview=$("#sidebar-interview"),HelpSpace.wiki_title=$(".wiki_title"),HelpSpace.wiki_extract=$(".wiki_extract"),HelpSpace.related_hook=$("#related_hook")},HelpSpace.getQueryVariable=function(a){"use strict";var e,b=window.location.search.substring(1),c=0,d=b.split("&");for(c=0;d.length>c;c+=1)if(e=d[c].split("="),e[0]===a)return e[1];return"Computer science"},HelpSpace.load_subject=function(){"use strict"},HelpSpace.load_class=function(a,b){"use strict";var c=encodeURIComponent(a),d=[];"cs125"===b&&$.getJSON("http://help-eck.herokuapp.com/"+c+"?callback=?",function(a){d.push('<li class="nav-header" id="li-hook">Eck Notes</li>'),$.each(a.eck,function(a,b){2>=a&&d.push('<a class="various fancybox.iframe" title="'+b[0]+'" href="'+b[1]+'">'+HelpSpace.shorten(b[0])+"</a><br/>")}),HelpSpace.related_hook.append(d.join("\n"))}).done(function(){HelpSpace.related_hook.show()})},HelpSpace.shorten=function(a){"use strict";return 22>a.length?HelpSpace.ucwords(a,!0):HelpSpace.ucwords(a.substr(0,22),!0)+"..."},HelpSpace.ucwords=function(a,b){"use strict";return a=b?a.toLowerCase():a,a.replace(/(\b)([a-zA-Z])/g,function(a){return a.toUpperCase()})},HelpSpace.clear_previous_results=function(){"use strict";HelpSpace.pdf.empty(),HelpSpace.interview.empty(),HelpSpace.swf.empty(),HelpSpace.factbites.empty(),HelpSpace.sidebar_swf.empty(),HelpSpace.sidebar_pdf.empty(),HelpSpace.sidebar_interview.empty(),HelpSpace.related_search_items.empty(),HelpSpace.suggested_search_items.empty(),HelpSpace.related_hook.empty(),HelpSpace.fact_flow_items.empty(),HelpSpace.picture_flow_items.empty(),HelpSpace.video_flow_items.empty()},HelpSpace.load_results=function(a,b){"use strict";b=b||[],HelpSpace.clear_previous_results();var e,f,g,c=a.replace(/ /g,"_"),d=encodeURIComponent(a);"Computer science"!==HelpSpace.getQueryVariable("course")&&HelpSpace.load_class(a,HelpSpace.getQueryVariable("course")),"Computer science"!==HelpSpace.getQueryVariable("subject")&&HelpSpace.load_subject(a,HelpSpace.getQueryVariable("subject")),-1===$.inArray("no_auto_wikipedia",b)&&(e="http://www.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&explaintext=&exsectionformat=plain&titles="+c+"&redirects&callback=?",$.getJSON(e,function(a){var b,c;$.each(a.query.pages,function(a,d){b='<strong><a class="various fancybox.iframe" href="http://en.wikipedia.org/wiki/'+d.title+'?printable=yes">Wikipedia: '+d.title+"</a></strong>",c=""===d.missing?"Not found on Wikipedia, click on the title above for redirection":"<p>"+d.extract+"</p>"}),HelpSpace.wiki_title.empty(),HelpSpace.wiki_extract.empty(),HelpSpace.wiki_title.append(b),HelpSpace.wiki_extract.append(c)})),-1===$.inArray("no_auto_images",b)&&(f="https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q="+d+"&safe=active&rsz=8&callback=?",$.getJSON(f,function(a){var b=[];$.each(a.responseData.results,function(a,c){0===a%4?0===a?b.push('<div class="item active"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c.url+'" title="'+c.titleNoFormatting+'"><img src="'+c.tbUrl+'" alt="" height="125px" width="100%"></a></div></li>'):b.push('<div class="item"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c.url+'" title="'+c.titleNoFormatting+'"><img src="'+c.tbUrl+'" alt="" height="125px" width="100%"></a></div></li>'):3!==a%4?b.push('<li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c.url+'" title="'+c.titleNoFormatting+'"><img src="'+c.tbUrl+'" alt="" height="125px" width="100%"></a></div></li>'):b.push('<li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c.url+'" title="'+c.titleNoFormatting+'"><img src="'+c.tbUrl+'" alt="" height="125px" width="100%"></a></div></li></div>')}),HelpSpace.picture_flow_items.append(b.join("\n"))})),-1===$.inArray("no_auto_youtube",b)&&(g="https://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&q="+d+"&max-results=8&format=5&safesearch=strict&html5=1&callback=?",$.getJSON(g,function(a){var b=[];$.each(a.data.items,function(a,c){var d=1===a?" active":"";b.push('<div class="item'+d+'"class="center"><iframe id="player" id="videos" type="text/html" width="100%" height="500px" src="http://www.youtube.com/embed/'+c.id+'?wmode=transparent&html5=1&controls=2&fs=1" frameborder="0"></iframe></div>')}),HelpSpace.video_flow_items.append(b.join("\n"))})),HelpSpace.load_from_api(d,b)},HelpSpace.parse_initial=function(a){"use strict";var c,b=[],d=[],e=[],f=[],g=[];a&&a.initial_search_terms&&(a.options&&a.options instanceof Array?HelpSpace.load_results(a.initial_search_terms[0],a.options):HelpSpace.load_results(a.initial_search_terms[0]),$.initial_search_term=a.initial_search_terms[0],c=a.initial_search_terms[0],HelpSpace.in_field.val(a.initial_search_terms[0])),HelpSpace.suggested_search.show(),a&&a.suggested_search&&a.suggested_search instanceof Array?$.each(a.suggested_search,function(a,c){b.push('<a href="#" rel="tooltip" title="'+c+'" onclick="HelpSpace.my_search(\''+c+"');\">"+HelpSpace.shorten(c)+"</a><br/>")}):a&&a.suggested_search?b.push('<a href="#" rel="tooltip" title="'+a.suggested_search+'" onclick="HelpSpace.my_search(\''+a.suggested_search+"');\">"+HelpSpace.shorten(a.suggested_search)+"</a><br/>"):HelpSpace.suggested_search.hide(),HelpSpace.suggested_search_items.append(b.join("\n")),a&&a.related_search&&(a.related_search instanceof Array?$.each(a.related_search,function(a,b){g.push('<a href="#" rel="tooltip" title="'+b+'" onclick="HelpSpace.my_search(\''+b+"');\">"+HelpSpace.shorten(b)+"</a><br/>")}):g.push('<a href="#" rel="tooltip" title="'+a.related_search+'" onclick="HelpSpace.my_search(\''+a.related_search+"');\">"+HelpSpace.shorten(a.related_search)+"</a><br/>")),HelpSpace.related_search_items.append(g.join("\n")),HelpSpace.related_search.show(),a&&a.initial_swf&&$.each(a.initial_swf,function(a,b){f.push('<a class="various" title="'+a+'" href="'+b+'">'+HelpSpace.shorten(a)+"</a><br/>")}),HelpSpace.sidebar_swf.append(f.join("\n")),HelpSpace.related_swf.show(),a&&a.initial_youtube_id&&(a.initial_swf instanceof Array?$.each(a.initial_youtube_id,function(a,b){d.push('<div class="item"><iframe id="ytplayer" type="text/html" width="100%" height="500px" src="http://www.youtube.com/embed/'+b+'?wmode=transparent&controls=2&fs=1&html5=1" frameborder="0"></iframe></div>')}):d.push('<div class="item"><iframe id="ytplayer" type="text/html" width="100%" height="500px" src="http://www.youtube.com/embed/'+a.initial_swf+'?wmode=transparent&controls=2&fs=1&html5=1" frameborder="0"></iframe></div>')),HelpSpace.video_flow_items.prepend(d.join("\n")),a&&a.initial_images&&(a.initial_images instanceof Array?$.each(a.initial_images,function(a,b){0===a%4?0===a?e.push('<div class="item"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" href="'+b+'"><img src="'+b+'" alt="" height="125px" width="100%"></a></div></li>'):e.push('<div class="item"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" href="'+b+'"><img src="'+b+'" alt="" height="125px" width="100%"></a></div></li>'):3!==a%4?e.push('<li class="span3"><div class="thumbnail"><a class="fancybox" href="'+b+'"><img src="'+b+'" alt="" height="125px" width="100%"></a></div></li>'):e.push('<li class="span3"><div class="thumbnail"><a class="fancybox" href="'+b+'"><img src="'+b+'" alt="" height="125px" width="100%"></a></div></li></div>')}):e.push('<li class="span3"><div class="thumbnail"><a class="fancybox" href="'+a.initial_images+'"><img src="'+a.initial_images+'" alt="" height="125px" width="100%"></a></div></li>')),HelpSpace.picture_flow_items.prepend(e.join("\n")),a&&a.course&&""!==a.course&&HelpSpace.load_class(c,a.course),a&&a.subject&&""!==a.subject&&HelpSpace.load_subject(c,a.subject)},HelpSpace.load_initial_data=function(a){"use strict";$.getJSON("/get-initial/?search="+a+"&callback=?",function(a){a&&a.type&&"url"===a.type?$.getJSON(a.url,function(a){HelpSpace.parse_initial(a)}):HelpSpace.parse_initial(a)}).error(function(){HelpSpace.load_results(a),$.initial_search_term=a,HelpSpace.in_field.val(a),HelpSpace.suggested_search.hide()})},HelpSpace.disable_input=function(){"use strict";HelpSpace.in_field.attr("disabled","disabled"),HelpSpace.related_search.hide(),HelpSpace.suggested_search.hide(),HelpSpace.related_hook.hide(),setTimeout(function(){HelpSpace.in_field.removeAttr("disabled")},2500),setTimeout(function(){HelpSpace.related_search.show()},2500),setTimeout(function(){HelpSpace.suggested_search.show()},2500)},HelpSpace.my_search=function(a){"use strict";return"#"===a[0]?HelpSpace.in_field.val(a.replace("#",$.initial_search_term)):HelpSpace.in_field.val(a),HelpSpace.load_initial_data(HelpSpace.in_field.val()),!1},HelpSpace.load_from_api=function(a,b){"use strict";-1!==$.inArray("auto_api_docs",b)?HelpSpace.api_docs.show():HelpSpace.api_docs.hide(),-1===$.inArray("no_auto_factbites",b)?$.getJSON("http://help-facts.herokuapp.com/"+a+"/?callback=?",function(a){var b=[],c=[];a.facts&&a.facts instanceof Array&&$.each(a.facts,function(a,d){1===a?(b.push('<div class="item active">'+d+"</div>"),c.push("<p>"+d+"</p>")):(b.push('<div class="item">'+d+"</div>"),c.push("<p>"+d+"</p>"))}),HelpSpace.fact_flow_items.append(b.join("\n")),HelpSpace.factbites.append(c.join("\n")),HelpSpace.fact_flow.show(),HelpSpace.tab_factbites.show()}).error(function(){HelpSpace.fact_flow.hide(),HelpSpace.tab_factbites.hide()}):(HelpSpace.fact_flow.hide(),HelpSpace.tab_factbites.hide()),-1===$.inArray("no_auto_interview",b)?$.getJSON("http://help-interview.herokuapp.com/"+a+"/?callback=?",function(a){var b=[],c=[];$.each(a.interview,function(a,d){2>=a&&c.push('<a class="various fancybox.iframe" title="'+d[0]+'" href="'+d[1]+'">'+HelpSpace.shorten(d[0])+"</a><br/>"),b.push('<a class="various fancybox.iframe" href="'+d[1]+'">'+(a+1)+") "+d[0]+"</a><br/>")}),HelpSpace.sidebar_interview.append(c.join("\n")),HelpSpace.interview.append(b.join("\n")),HelpSpace.related_interview.show(),HelpSpace.tab_interview.show()}).error(function(){HelpSpace.related_interview.hide(),HelpSpace.tab_interview.hide()}):(HelpSpace.related_interview.hide(),HelpSpace.tab_interview.hide()),-1===$.inArray("no_auto_pdfs",b)?$.getJSON("http://help-pdf.herokuapp.com/"+a+"/?callback=?",function(a){var b=[],c=[];$.each(a.pdf,function(a,d){2>=a&&c.push('<a class="various" title="'+d[0]+'" href="https://viewer.zoho.com/api/urlview.do?embed=true&url='+d[1]+'">'+HelpSpace.shorten(d[0])+"</a><br/>"),b.push('<a class="various" href="https://viewer.zoho.com/api/urlview.do?embed=true&url='+d[1]+'">'+(a+1)+") "+d[0]+"</a><br/>")}),HelpSpace.sidebar_pdf.append(c.join("\n")),HelpSpace.pdf.append(b.join("\n")),HelpSpace.tab_pdf.show(),HelpSpace.related_pdf.show()}).error(function(){HelpSpace.tab_pdf.hide(),HelpSpace.related_pdf.hide()}):(HelpSpace.tab_pdf.hide(),HelpSpace.pdf.hide(),HelpSpace.related_pdf.hide()),-1===$.inArray("no_auto_related",b)?$.getJSON("http://help-related.herokuapp.com/"+a+"/?callback=?",function(a){var b=[];$.each(a.related,function(a,c){3>=a&&b.push('<a href="#" rel="tooltip" title="'+c+'" onclick="HelpSpace.my_search(\''+c+"');\">"+HelpSpace.shorten(c)+"</a><br/>")}),HelpSpace.related_search_items.append(b.join("\n")),HelpSpace.related_search.show()}).error(function(){HelpSpace.related_search.hide()}):HelpSpace.related_search.hide(),-1!==$.inArray("auto_swfs",b)?$.getJSON("http://help-swf.herokuapp.com/"+a+"/?callback=?",function(a){var b=[],c=[];$.each(a.swf,function(a,d){2>=a&&c.push('<a class="various fancybox.iframe" title="'+d[0]+'" href="'+d[1]+'">'+HelpSpace.shorten(d[0])+"</a><br/>"),b.push('<a class="various fancybox.iframe" href="'+d[1]+'">'+(a+1)+") "+d[0]+"</a><br/>")}),HelpSpace.sidebar_swf.append(c.join("\n")),HelpSpace.swf.append(b.join("\n")),HelpSpace.tab_swf.show(),HelpSpace.swf.show(),HelpSpace.related_swf.show()}).error(function(){HelpSpace.tab_swf.hide(),HelpSpace.swf.hide(),HelpSpace.related_swf.hide()}):(HelpSpace.tab_swf.hide(),HelpSpace.swf.hide(),HelpSpace.related_swf.hide()),-1===$.inArray("no_auto_images",b)&&$.getJSON("http://help-img.herokuapp.com/"+a+"/?callback=?",function(a){var b=[];$.each(a.img,function(a,c){15>=a&&(0===a%4?0===a?b.push('<div class="item"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c[0]+'"><img src="'+c[1]+'" alt="" height="125px" width="100%"></a></div></li>'):b.push('<div class="item"><ul class="thumbnails"><li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c[0]+'"><img src="'+c[1]+'" alt="" height="125px" width="100%"></a></div></li>'):3!==a%4?b.push('<li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c[0]+'"><img src="'+c[1]+'" alt="" height="125px" width="100%"></a></div></li>'):b.push('<li class="span3"><div class="thumbnail"><a class="fancybox" rel="img" href="'+c[0]+'"><img src="'+c[1]+'" alt="" height="125px" width="100%"></a></div></li></div>'))}),HelpSpace.picture_flow_items.append(b.join("\n")),HelpSpace.picture_flow.show()})},HelpSpace.disable_all=function(){"use strict";HelpSpace.interview.hide(),HelpSpace.factbites.hide(),HelpSpace.wikipedia.hide(),HelpSpace.swf.hide(),HelpSpace.pdf.hide(),HelpSpace.wolfram.hide(),HelpSpace.youtube.hide(),HelpSpace.video_image_span.hide(),HelpSpace.fact_span.hide(),HelpSpace.wiki_text.hide()},$(document).ready(function(){"use strict";HelpSpace.populate_namespace(),$(".fancybox").fancybox({openEffect:"none",closeEffect:"none",helpers:{title:{type:"outside"}}}),$(".various").fancybox({type:"iframe",scrolling:"no",showNavArrows:!1,hideOnContentClick:!1,width:"100%",height:"100%",openEffect:"elastic",openSpeed:150,closeEffect:"elastic",closeSpeed:150,closeClick:!0}),HelpSpace.api_docs.hide(),HelpSpace.in_field.bind("keypress",function(a){var b=a.keyCode||a.which;return 13===b?(HelpSpace.disable_input(),HelpSpace.load_initial_data(HelpSpace.in_field.val()),!1):void 0}),HelpSpace.load_initial_data(HelpSpace.getQueryVariable("q")),$('[id^="video_flow"]').carousel("pause"),$("#fact_flow").carousel({interval:1e4}),YUI().use("autocomplete","autocomplete-highlighters",function(a){a.one("body").addClass("yui3-skin-sam"),a.one("#in-field").plug(a.Plugin.AutoComplete,{resultHighlighter:"phraseMatch",resultListLocator:function(a){return a[1]||[]},source:"https://en.wikipedia.org/w/api.php?action=opensearch&search={query}&limit=10&namespace=0&format=json&callback={callback}"})}),$('#myTab a[href="#combo"]').click(function(a){a.preventDefault(),HelpSpace.video_image_span.show().removeClass("span9").addClass("span7"),HelpSpace.video_flow.show(),HelpSpace.picture_flow.show(),HelpSpace.wiki_text.show().removeClass("span9").addClass("span3"),HelpSpace.fact_span.show(),HelpSpace.interview.hide(),HelpSpace.factbites.hide(),HelpSpace.wikipedia.hide(),HelpSpace.swf.hide(),HelpSpace.pdf.hide(),HelpSpace.wolfram.hide(),HelpSpace.youtube.hide()}),$('#myTab a[href="#youtube"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.video_image_span.show().removeClass("span7").addClass("span9"),HelpSpace.video_flow.show(),HelpSpace.picture_flow.hide()}),$('#myTab a[href="#images"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.video_image_span.show(),HelpSpace.video_flow.hide(),HelpSpace.picture_flow.show()}),$('#myTab a[href="#wolfram"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.wolfram.show()}),$('#myTab a[href="#pdf"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.pdf.show()}),$('#myTab a[href="#swf"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.swf.show()}),$('#myTab a[href="#wikipedia"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.wiki_text.show().removeClass("span3").addClass("span9")}),$('#myTab a[href="#factbites"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.factbites.show().addClass("span9")}),$('#myTab a[href="#interview"]').click(function(a){a.preventDefault(),HelpSpace.disable_all(),HelpSpace.interview.show()})});